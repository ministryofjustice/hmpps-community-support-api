server:
  shutdown: immediate

management.endpoint:
  health.cache.time-to-live: 0
  info.cache.time-to-live: 0

# Disable scheduled refresh during tests (use manual refresh via TestDataCleaner)
case-list-view:
  refresh-rate-ms: 999999999  # Effectively disabled

spring:
  jpa:
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        enable_lazy_load_no_trans: true
  datasource:
    driver-class-name: org.postgresql.Driver
    url: jdbc:postgresql://localhost:5432/postgres
    username: admin
    password: admin_password
  application:
    environment: dev
  security:
    oauth2:
      client:
        provider:
          hmpps-auth:
            token-uri: http://localhost:8090/auth/oauth/token
        registration:
          community-support-api-client:
            provider: hmpps-auth
            client-id: test-client
            client-secret: test-secret
            authorization-grant-type: client_credentials

services:
  hmpps-auth-api:
    base-url: "http://localhost:8090/auth"
  ndelius-integration-api:
    base-url: "http://localhost:${wiremock.server.port}"
  nomis-api:
    base-url: "http://localhost:${wiremock.server.port}"
  manage-users-api:
    base-url: "http://localhost:${wiremock.server.port}"
    locations:
      auth-user-groups: "/externalusers/{userId}/groups"
      auth-user-details: "/users/{userName}"
webclient:
  max-retry-attempts: 2
  connect-timeout-seconds: 20
  read-timeout-seconds: 10
  write-timeout-seconds: 10
  manage-users-api:
    max-retry-attempts: 2

wiremock:
  logging:
    verbose: true

reference-data:
  probation-offices:
    path: "test-data/probation-offices-v0.csv"